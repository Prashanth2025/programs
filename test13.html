<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Instagram Post (session storage)</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
    <style>
      body {
        background-color: white;
        width: 400px;
        margin: auto;
        padding: 20px;
      }
      .post-card {
        max-width: 400px;
        margin: 30px auto;
      }
      .post-img {
        object-fit: contain;
        height: 200px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div id="postContainer"></div>
    </div>

    <script>
      // ✅ Posts array
      let posts = [
        {
          title: "SPORTS WATCH",
          image:
            "https://m.media-amazon.com/images/I/61fyBGuO18L._UY1000_.jpg",
          price: "$200",
          desc: "Waterproof sports watch",
        },
        {
          title: "Camphor",
          image:
            "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRihM0MpLJhVeU3IUwhEqEzPmJi4nRYjPkKoQ&s",
          price: "$10",
          desc: "Fireproof Camphor",
        },
      ];

      let postContainer = document.getElementById("postContainer");

      // ✅ Loop through posts
      posts.forEach((post, i) => {
        let likes = Number(sessionStorage.getItem(`likes${i}`)) || 0;
        let dislikes = Number(sessionStorage.getItem(`dislikes${i}`)) || 0;

        postContainer.innerHTML += `
          <div class="card post-card shadow-sm">
            <img src="${post.image}" class="card-img-top post-img" alt="post"/>
            <p class="card-text text-center mt-2">
              <strong>${post.title}</strong><br>
              <strong>${post.price}</strong><br>
              <span>${post.desc}</span>
            </p>

            <div class="card-body text-center">
              <h5 id="like${i}">${likes}</h5>
              <button id="likeBtn${i}" class="btn btn-outline-danger me-2">
                <i class="bi bi-hand-thumbs-up-fill"></i>
              </button>

              <h5 id="dislike${i}">${dislikes}</h5>
              <button id="dislikeBtn${i}" class="btn btn-outline-warning me-2">
                <i class="bi bi-hand-thumbs-down-fill"></i>
              </button>

              <div class="text-center mt-3 dark">
                <h5>
                  <strong>Total Reactions: <span id="totalCount${i}">${likes + dislikes}</span></strong>
                </h5>
              </div>
            </div>
          </div>
        `;

        // ✅ Add event listeners for each post
        document.addEventListener("click", function (e) {
          if (e.target.closest(`#likeBtn${i}`)) {
            likes++;
            document.getElementById(`like${i}`).textContent = likes;
            document.getElementById(`totalCount${i}`).textContent = likes + dislikes;
            sessionStorage.setItem(`likes${i}`, likes);
          }

          if (e.target.closest(`#dislikeBtn${i}`)) {
            dislikes++;
            document.getElementById(`dislike${i}`).textContent = dislikes;
            document.getElementById(`totalCount${i}`).textContent = likes + dislikes;
            sessionStorage.setItem(`dislikes${i}`, dislikes);
          }
        });
      });
    </script>
  </body>
</html>
